<div class="container">
  <h1>Two-Factor Authentication</h1>

  <% if current_user.otp_enabled? %>
    <div class="alert alert-success">
      <p>Two-factor authentication is enabled.</p>
    </div>

    <div class="qr-code">
      <h2>Scan this QR code with your authenticator app:</h2>
      <%= raw @qr_code %>
    </div>

    <div class="manual-entry">
      <h3>Or enter this code manually:</h3>
      <code><%= current_user.otp_secret %></code>
    </div>

    <%= form_with url: disable_two_factor_path, method: :post, local: true do |f| %>
      <%= f.submit "Disable Two-Factor Authentication", class: "btn btn-danger", data: { confirm: "Are you sure you want to disable 2FA?" } %>
    <% end %>
  <% else %>
    <div class="alert alert-info">
      <p>Two-factor authentication is not enabled.</p>
    </div>

    <%= form_with url: enable_two_factor_path, method: :post, local: true do |f| %>
      <%= f.submit "Enable Two-Factor Authentication", class: "btn btn-primary" %>
    <% end %>
  <% end %>

  <%= link_to "Back", root_path, class: "btn btn-secondary" %>
</div>

